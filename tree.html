<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ—Å–∫–∞ - –î–µ—Ä–µ–≤–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }
        
        .apple {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: grab;
            user-select: none;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        
        .apple:active {
            cursor: grabbing;
        }
        
        .apple:hover {
            transform: scale(1.15) translateY(-5px);
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.2));
        }
        
        .apple.dragging {
            transform: scale(1.3) rotate(5deg);
            z-index: 1000;
            filter: drop-shadow(0 12px 24px rgba(0,0,0,0.3));
        }
        
        .tree-zone {
            transition: all 0.4s ease;
            position: relative;
        }
        
        .tree-zone.drag-over {
            filter: drop-shadow(0 0 30px rgba(34, 197, 94, 0.8));
            transform: scale(1.02);
        }
        
        .tree-animation {
            animation: gentle-sway 8s ease-in-out infinite;
        }
        
        @keyframes gentle-sway {
            0%, 100% { transform: rotate(0deg) translateY(0px); }
            25% { transform: rotate(0.3deg) translateY(-2px); }
            50% { transform: rotate(0deg) translateY(0px); }
            75% { transform: rotate(-0.3deg) translateY(2px); }
        }
        
        .apple-on-tree {
            animation: apple-appear 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes apple-appear {
            0% { 
                transform: scale(0) rotate(180deg); 
                opacity: 0; 
            }
            50% { 
                transform: scale(1.3) rotate(10deg); 
                opacity: 0.8; 
            }
            100% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
            }
        }
        
        .stats-counter {
            animation: count-up 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes count-up {
            0% { transform: scale(1.8) rotate(5deg); }
            50% { transform: scale(0.9) rotate(-2deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .reset-btn {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .reset-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .reset-btn:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        .panel-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .stats-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .notification {
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .floating-leaves {
            position: absolute;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #32CD32, #228B22);
            border-radius: 50% 0;
            opacity: 0.6;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .leaf-1 { top: 10%; left: 10%; animation-delay: 0s; }
        .leaf-2 { top: 20%; right: 15%; animation-delay: 2s; }
        .leaf-3 { bottom: 30%; left: 20%; animation-delay: 4s; }
        .leaf-4 { bottom: 20%; right: 10%; animation-delay: 1s; }
        
        .lang-btn {
            padding: 8px 16px;
            margin: 0 4px;
            border: none;
            border-radius: 20px;
            background: transparent;
            color: #666;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .lang-btn:hover {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            transform: translateY(-1px);
        }
        
        .lang-btn.active {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        
        .lang-btn.active:hover {
            transform: translateY(-1px) scale(1.05);
        }
        
        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }
            
            .left-panel {
                width: 100%;
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
            .tree-svg {
                width: 100%;
                height: auto;
            }
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .apple svg {
                width: 80px;
                height: 80px;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-emerald-100 via-teal-50 to-green-100 font-sans overflow-x-hidden">
    <main class="h-screen flex flex-col p-4">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="text-center mb-6">
            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤ -->
            <div class="flex justify-center mb-4">
                <div class="bg-white/80 backdrop-blur rounded-full p-2 shadow-lg">
                    <button onclick="switchLanguage('ru')" class="lang-btn active" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
                    <button onclick="switchLanguage('kz')" class="lang-btn" data-lang="kz">üá∞üáø “ö–∞–∑–∞“õ—à–∞</button>
                    <button onclick="switchLanguage('en')" class="lang-btn" data-lang="en">üá∫üá∏ English</button>
                </div>
            </div>
            
            <h1 class="title text-6xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-3" data-translate="title">üå≥ –î–µ—Ä–µ–≤–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —É—Ä–æ–∫–∞</h1>
            <p class="subtitle text-xl text-gray-600 font-medium" data-translate="subtitle">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —è–±–ª–æ–∫–æ –Ω–∞ –¥–µ—Ä–µ–≤–æ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ</p>
        </header>
        
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <div class="flex-1 flex main-container">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —è–±–ª–æ–∫–∞–º–∏ -->
            <div class="left-panel w-80 panel-card rounded-3xl p-6 mr-6 flex flex-col">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center" data-translate="choose-understanding">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ</h2>
                
                <!-- –Ø–±–ª–æ–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è -->
                <div class="space-y-6 flex-1">
                    <!-- –ó–µ–ª–µ–Ω–æ–µ —è–±–ª–æ–∫–æ -->
                    <div class="text-center">
                        <div class="apple mb-3" 
                             data-type="understood" 
                             data-color="#32CD32"
                             draggable="true"
                             onclick="addAppleToTree('understood', '#32CD32')">
                            <svg width="120" height="120" viewBox="0 0 100 100" class="mx-auto">
                                <circle cx="50" cy="55" r="35" fill="#32CD32" stroke="#228B22" stroke-width="3"/>
                                <ellipse cx="42" cy="48" rx="10" ry="15" fill="#90EE90" opacity="0.7"/>
                                <path d="M50 20 Q55 15 60 20" stroke="#8B4513" stroke-width="4" fill="none"/>
                                <path d="M55 18 Q62 12 68 18 Q62 25 55 22" fill="#228B22"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-bold text-green-700" data-translate="understood-title">–Ø –≤—Å–µ –ø–æ–Ω—è–ª! üòä</h3>
                        <p class="text-sm text-gray-600" data-translate="understood-desc">–ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–Ω—è—Ç–µ–Ω</p>
                    </div>
                    
                    <!-- –ñ–µ–ª—Ç–æ–µ —è–±–ª–æ–∫–æ -->
                    <div class="text-center">
                        <div class="apple mb-3" 
                             data-type="questions" 
                             data-color="#FFD700"
                             draggable="true"
                             onclick="addAppleToTree('questions', '#FFD700')">
                            <svg width="120" height="120" viewBox="0 0 100 100" class="mx-auto">
                                <circle cx="50" cy="55" r="35" fill="#FFD700" stroke="#FFA500" stroke-width="3"/>
                                <ellipse cx="42" cy="48" rx="10" ry="15" fill="#FFFF99" opacity="0.7"/>
                                <path d="M50 20 Q55 15 60 20" stroke="#8B4513" stroke-width="4" fill="none"/>
                                <path d="M55 18 Q62 12 68 18 Q62 25 55 22" fill="#228B22"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-bold text-yellow-600" data-translate="questions-title">–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã ü§î</h3>
                        <p class="text-sm text-gray-600" data-translate="questions-desc">–ù—É–∂–Ω—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è</p>
                    </div>
                    
                    <!-- –ö—Ä–∞—Å–Ω–æ–µ —è–±–ª–æ–∫–æ -->
                    <div class="text-center">
                        <div class="apple mb-3" 
                             data-type="confused" 
                             data-color="#DC143C"
                             draggable="true"
                             onclick="addAppleToTree('confused', '#DC143C')">
                            <svg width="120" height="120" viewBox="0 0 100 100" class="mx-auto">
                                <circle cx="50" cy="55" r="35" fill="#DC143C" stroke="#B22222" stroke-width="3"/>
                                <ellipse cx="42" cy="48" rx="10" ry="15" fill="#FFB6C1" opacity="0.7"/>
                                <path d="M50 20 Q55 15 60 20" stroke="#8B4513" stroke-width="4" fill="none"/>
                                <path d="M55 18 Q62 12 68 18 Q62 25 55 22" fill="#228B22"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-bold text-red-600" data-translate="confused-title">–ù–µ –ø–æ–Ω—è–ª üòï</h3>
                        <p class="text-sm text-gray-600" data-translate="confused-desc">–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å</p>
                    </div>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ -->
                <button onclick="resetTree()" 
                        class="reset-btn w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-bold py-4 px-6 rounded-xl mt-6 shadow-lg" data-translate="reset-button">
                    üîÑ –û—á–∏—Å—Ç–∏—Ç—å –¥–µ—Ä–µ–≤–æ
                </button>
            </div>
            
            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —Å –¥–µ—Ä–µ–≤–æ–º -->
            <div class="flex-1 flex flex-col">
                <!-- –î–µ—Ä–µ–≤–æ -->
                <div class="flex-1 flex items-center justify-center relative">
                    <div class="floating-leaves leaf-1"></div>
                    <div class="floating-leaves leaf-2"></div>
                    <div class="floating-leaves leaf-3"></div>
                    <div class="floating-leaves leaf-4"></div>
                    <div class="tree-zone tree-animation" id="treeZone">
                        <svg width="900" height="700" viewBox="0 0 600 500" class="tree-svg drop-shadow-2xl">
                            <!-- –°—Ç–≤–æ–ª -->
                            <rect x="285" y="350" width="30" height="150" fill="#8B4513" rx="4"/>
                            <rect x="280" y="360" width="40" height="130" fill="#A0522D" rx="6"/>
                            
                            <!-- –ö–æ—Ä–Ω–∏ -->
                            <path d="M280 480 Q250 490 220 485" stroke="#8B4513" stroke-width="8" fill="none"/>
                            <path d="M320 480 Q350 490 380 485" stroke="#8B4513" stroke-width="8" fill="none"/>
                            <path d="M300 485 Q300 495 300 500" stroke="#8B4513" stroke-width="6" fill="none"/>
                            
                            <!-- –ö—Ä–æ–Ω–∞ –¥–µ—Ä–µ–≤–∞ (–º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è) -->
                            <circle cx="300" cy="250" r="120" fill="#228B22" opacity="0.9"/>
                            <circle cx="250" cy="220" r="90" fill="#32CD32" opacity="0.8"/>
                            <circle cx="350" cy="220" r="90" fill="#32CD32" opacity="0.8"/>
                            <circle cx="300" cy="180" r="80" fill="#90EE90" opacity="0.8"/>
                            <circle cx="220" cy="200" r="60" fill="#228B22" opacity="0.7"/>
                            <circle cx="380" cy="200" r="60" fill="#228B22" opacity="0.7"/>
                            <circle cx="300" cy="140" r="50" fill="#90EE90" opacity="0.9"/>
                            
                            <!-- –í–µ—Ç–∫–∏ -->
                            <path d="M280 300 Q240 280 200 290" stroke="#8B4513" stroke-width="6" fill="none"/>
                            <path d="M320 300 Q360 280 400 290" stroke="#8B4513" stroke-width="6" fill="none"/>
                            <path d="M290 250 Q250 230 210 240" stroke="#8B4513" stroke-width="4" fill="none"/>
                            <path d="M310 250 Q350 230 390 240" stroke="#8B4513" stroke-width="4" fill="none"/>
                            
                            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —è–±–ª–æ–∫ –Ω–∞ –¥–µ—Ä–µ–≤–µ -->
                            <g id="treeApples"></g>
                        </svg>
                    </div>
                </div>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats-card rounded-2xl p-6 mt-4">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center" data-translate="class-results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–ª–∞—Å—Å–∞</h3>
                    <div class="grid grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-green-600 stats-counter" id="understoodCount">0</div>
                            <div class="text-sm text-gray-600" data-translate="understood-label">–ü–æ–Ω—è–ª–∏</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-yellow-600 stats-counter" id="questionsCount">0</div>
                            <div class="text-sm text-gray-600" data-translate="questions-label">–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-red-600 stats-counter" id="confusedCount">0</div>
                            <div class="text-sm text-gray-600" data-translate="confused-label">–ù–µ –ø–æ–Ω—è–ª–∏</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
        const translations = {
            ru: {
                title: "üå≥ –î–µ—Ä–µ–≤–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —É—Ä–æ–∫–∞",
                subtitle: "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —è–±–ª–æ–∫–æ –Ω–∞ –¥–µ—Ä–µ–≤–æ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ",
                "choose-understanding": "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ",
                "understood-title": "–Ø –≤—Å–µ –ø–æ–Ω—è–ª! üòä",
                "understood-desc": "–ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–Ω—è—Ç–µ–Ω",
                "questions-title": "–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã ü§î",
                "questions-desc": "–ù—É–∂–Ω—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è",
                "confused-title": "–ù–µ –ø–æ–Ω—è–ª üòï",
                "confused-desc": "–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å",
                "reset-button": "üîÑ –û—á–∏—Å—Ç–∏—Ç—å –¥–µ—Ä–µ–≤–æ",
                "class-results": "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–ª–∞—Å—Å–∞",
                "understood-label": "–ü–æ–Ω—è–ª–∏",
                "questions-label": "–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã",
                "confused-label": "–ù–µ –ø–æ–Ω—è–ª–∏",
                "understood-message": "üéâ –û—Ç–ª–∏—á–Ω–æ! –£—á–µ–Ω–∏–∫ –≤—Å–µ –ø–æ–Ω—è–ª!",
                "questions-message": "üí≠ –£ —É—á–µ–Ω–∏–∫–∞ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã",
                "confused-message": "ü§ù –£—á–µ–Ω–∏–∫—É –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å",
                "reset-message": "üîÑ –î–µ—Ä–µ–≤–æ –æ—á–∏—â–µ–Ω–æ! –ì–æ—Ç–æ–≤–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ —É—Ä–æ–∫–∞"
            },
            kz: {
                title: "üå≥ –°–∞–±–∞“õ—Ç—ã —Ç“Ø—Å—ñ–Ω—É –∞“ì–∞—à—ã",
                subtitle: "–ê–ª–º–∞–Ω—ã –∞“ì–∞—à“õ–∞ —Ç–∞—Ä—Ç—ã“£—ã–∑ –Ω–µ–º–µ—Å–µ –±–∞—Å—ã“£—ã–∑",
                "choose-understanding": "–¢“Ø—Å—ñ–Ω—É—ñ“£—ñ–∑–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑",
                "understood-title": "–ú–µ–Ω –±”ô—Ä—ñ–Ω —Ç“Ø—Å—ñ–Ω–¥—ñ–º! üòä",
                "understood-desc": "–ú–∞—Ç–µ—Ä–∏–∞–ª —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç—ñ",
                "questions-title": "–°“±—Ä–∞“õ—Ç–∞—Ä—ã–º –±–∞—Ä ü§î",
                "questions-desc": "–¢“Ø—Å—ñ–Ω—ñ–∫—Ç–µ–º–µ “õ–∞–∂–µ—Ç",
                "confused-title": "–¢“Ø—Å—ñ–Ω–±–µ–¥—ñ–º üòï",
                "confused-desc": "–ö”©–º–µ–∫ “õ–∞–∂–µ—Ç",
                "reset-button": "üîÑ –ê“ì–∞—à—Ç—ã —Ç–∞–∑–∞–ª–∞—É",
                "class-results": "–°—ã–Ω—ã–ø –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä—ñ",
                "understood-label": "–¢“Ø—Å—ñ–Ω–¥—ñ",
                "questions-label": "–°“±—Ä–∞“õ—Ç–∞—Ä—ã –±–∞—Ä",
                "confused-label": "–¢“Ø—Å—ñ–Ω–±–µ–¥—ñ",
                "understood-message": "üéâ –ö–µ—Ä–µ–º–µ—Ç! –û“õ—É—à—ã –±”ô—Ä—ñ–Ω —Ç“Ø—Å—ñ–Ω–¥—ñ!",
                "questions-message": "üí≠ –û“õ—É—à—ã–Ω—ã“£ —Å“±—Ä–∞“õ—Ç–∞—Ä—ã –±–∞—Ä",
                "confused-message": "ü§ù –û“õ—É—à—ã“ì–∞ –∫”©–º–µ–∫ “õ–∞–∂–µ—Ç",
                "reset-message": "üîÑ –ê“ì–∞—à —Ç–∞–∑–∞–ª–∞–Ω–¥—ã! –ñ–∞“£–∞ —Å–∞–±–∞“õ“õ–∞ –¥–∞–π—ã–Ω"
            },
            en: {
                title: "üå≥ Lesson Understanding Tree",
                subtitle: "Drag an apple to the tree or click on it",
                "choose-understanding": "Choose your understanding",
                "understood-title": "I understood everything! üòä",
                "understood-desc": "Material is clear",
                "questions-title": "I have questions ü§î",
                "questions-desc": "Need clarification",
                "confused-title": "I don't understand üòï",
                "confused-desc": "Need help",
                "reset-button": "üîÑ Clear tree",
                "class-results": "Class results",
                "understood-label": "Understood",
                "questions-label": "Have questions",
                "confused-label": "Don't understand",
                "understood-message": "üéâ Great! Student understood everything!",
                "questions-message": "üí≠ Student has questions",
                "confused-message": "ü§ù Student needs help",
                "reset-message": "üîÑ Tree cleared! Ready for new lesson"
            }
        };

        let currentLanguage = 'ru';
        
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
        function switchLanguage(lang) {
            currentLanguage = lang;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
            
            // –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
        }

        let appleCount = { understood: 0, questions: 0, confused: 0 };
        let draggedApple = null;
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
        document.querySelectorAll('.apple').forEach(apple => {
            apple.addEventListener('dragstart', handleDragStart);
            apple.addEventListener('dragend', handleDragEnd);
        });
        
        const treeZone = document.getElementById('treeZone');
        treeZone.addEventListener('dragover', handleDragOver);
        treeZone.addEventListener('drop', handleDrop);
        treeZone.addEventListener('dragenter', handleDragEnter);
        treeZone.addEventListener('dragleave', handleDragLeave);
        
        function handleDragStart(e) {
            draggedApple = {
                type: this.dataset.type,
                color: this.dataset.color
            };
            this.classList.add('dragging');
        }
        
        function handleDragEnd(e) {
            this.classList.remove('dragging');
        }
        
        function handleDragOver(e) {
            e.preventDefault();
        }
        
        function handleDragEnter(e) {
            e.preventDefault();
            treeZone.classList.add('drag-over');
        }
        
        function handleDragLeave(e) {
            if (!treeZone.contains(e.relatedTarget)) {
                treeZone.classList.remove('drag-over');
            }
        }
        
        function handleDrop(e) {
            e.preventDefault();
            treeZone.classList.remove('drag-over');
            
            if (draggedApple) {
                addAppleToTree(draggedApple.type, draggedApple.color);
                draggedApple = null;
            }
        }
        
        function addAppleToTree(type, color) {
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
            appleCount[type]++;
            updateStats();
            
            // –°–æ–∑–¥–∞–µ–º —è–±–ª–æ–∫–æ –Ω–∞ –¥–µ—Ä–µ–≤–µ
            const treeApples = document.getElementById('treeApples');
            const newApple = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –∫—Ä–æ–Ω–µ –¥–µ—Ä–µ–≤–∞
            const positions = [
                {x: 250 + Math.random() * 100, y: 180 + Math.random() * 80},
                {x: 220 + Math.random() * 60, y: 200 + Math.random() * 40},
                {x: 320 + Math.random() * 60, y: 200 + Math.random() * 40},
                {x: 270 + Math.random() * 60, y: 160 + Math.random() * 50},
                {x: 240 + Math.random() * 120, y: 220 + Math.random() * 60}
            ];
            
            const pos = positions[Math.floor(Math.random() * positions.length)];
            
            newApple.setAttribute('cx', pos.x);
            newApple.setAttribute('cy', pos.y);
            newApple.setAttribute('r', '12');
            newApple.setAttribute('fill', color);
            newApple.setAttribute('stroke', '#fff');
            newApple.setAttribute('stroke-width', '2');
            newApple.classList.add('apple-on-tree');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–∏–∫ –Ω–∞ —è–±–ª–æ–∫–µ
            const highlight = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
            highlight.setAttribute('cx', pos.x - 3);
            highlight.setAttribute('cy', pos.y - 3);
            highlight.setAttribute('rx', '3');
            highlight.setAttribute('ry', '5');
            highlight.setAttribute('fill', '#fff');
            highlight.setAttribute('opacity', '0.6');
            highlight.classList.add('apple-on-tree');
            
            treeApples.appendChild(newApple);
            treeApples.appendChild(highlight);
            
            // –ó–≤—É–∫–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç (–≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å)
            showFeedback(type);
        }
        
        function updateStats() {
            document.getElementById('understoodCount').textContent = appleCount.understood;
            document.getElementById('questionsCount').textContent = appleCount.questions;
            document.getElementById('confusedCount').textContent = appleCount.confused;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞
            document.querySelectorAll('.stats-counter').forEach(counter => {
                counter.classList.remove('stats-counter');
                setTimeout(() => counter.classList.add('stats-counter'), 10);
            });
        }
        
        function showFeedback(type) {
            const messages = {
                understood: translations[currentLanguage]['understood-message'],
                questions: translations[currentLanguage]['questions-message'],
                confused: translations[currentLanguage]['confused-message']
            };
            
            const colors = {
                understood: 'bg-green-100 border-green-400 text-green-700',
                questions: 'bg-yellow-100 border-yellow-400 text-yellow-700',
                confused: 'bg-red-100 border-red-400 text-red-700'
            };
            
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 ${colors[type]} border px-6 py-3 rounded-lg notification z-50 transform translate-x-full transition-transform duration-300`;
            notification.textContent = messages[type];
            
            document.body.appendChild(notification);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // –°–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        function resetTree() {
            // –û—á–∏—â–∞–µ–º –¥–µ—Ä–µ–≤–æ
            document.getElementById('treeApples').innerHTML = '';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏
            appleCount = { understood: 0, questions: 0, confused: 0 };
            updateStats();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-blue-100 border-blue-400 text-blue-700 border px-6 py-3 rounded-lg notification z-50 transform translate-x-full transition-transform duration-300';
            notification.textContent = translations[currentLanguage]['reset-message'];
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            switchLanguage('ru');
        });
    </script>
</body>
</html>
